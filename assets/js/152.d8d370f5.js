(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{417:function(t,s,a){"use strict";a.r(s);var e=a(13),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("pip2.exe install paramiko")]),t._v(" "),s("p",[t._v("import  paramiko")]),t._v(" "),s("h2",{attrs:{id:"sshclient"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sshclient"}},[t._v("#")]),t._v(" SSHClient")]),t._v(" "),s("p",[s("strong",[t._v("基于用户名、密码连接：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import  paramiko\n#创建ssh对象\nssh = paramiko.SSHClient()\n#允许连接不再know_hosts文件中的主机                #将要ssh连接的设备ip地址添加到本地的know_host文件中（添加的是对端的地址）\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n#连接服务器\nssh.connect(hostname='c1.salt.com',port=22,username='alex',password='123')\n#执行命令\nstdin,stdout,stderr = ssh.exec_command('df')                    #stdin此处是“df”\n#获取命令结果\nresult = stdout.read()                    #这个结果好像是bite格式的，要正常输出好像还需要decode一下 print result.decode()\n#关闭连接\nssh.close()\n")])])]),s("p",[s("strong",[t._v("基于密钥的ssh连接：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import paramiko\n\nprivate_key = paramiko.RSAKey.from_private_key_file('/home/auto/.ssh/id_rsa')\n#创建ssh对象\nssh = paramiko.SSHClient()\n#允许连接不再know_hosts文件中的主机\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n#连接服务器\nssh.connect(hostname='c1.salt.com',port=22,username='alex',pkey=private_key)\n\nstdin,stdout,stderr = ssh.exec_command('df')\nresult = stdout.read()\nprint result.decode()\n\nstdin,stdout,stderr = ssh.exec_command('ifconfig')                        #这里执行2条命令好像有问题\nresult = stdout.read()\nprint result.decode()\nssh.close()\n")])])]),s("p",[s("strong",[t._v("基于用户名、密码上传、下载：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import paramiko\n\ntransport = paramiko.Transport(('hostname',22))\ntransport.connect(username='alex',password='123')\n\nsftp = paramiko.SFTPClient.from_transport(transport)\n# 将localtion.py上传至服务器 /tmp/test.py\nsftp.put('/tmp/localtion.py','/tmp/test.py')\n# 将 remove_path 下载到本地local_path\nsftp.get('remove_path','local_path')\n\ntransport.close()\n")])])]),s("p",[s("strong",[t._v("基于密钥的sftp上传下载（脚本里面不能出现用户名、密码，就采用密钥连接）")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import paramiko\nprivate_key = paramiko.RSAKey.from_private_key_file('/home/auto/.ssh/id_rsa')\ntransport = paramiko.Transport(('hostname',22))\ntransport.connect(username='alex',pkey=private_key)\nsftp = paramiko.SFTPClient.from_transport(transport)\nsftp.put('/tmp/localtion.py','/tmp/test.py')\nsftp.get('remove_path','local_path')\ntransport.close()\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);