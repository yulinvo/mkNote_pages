(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{296:function(e,n,i){"use strict";i.r(n);var t=i(13),l=Object(t.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("1，解压后进入/root/src/php/php-7.1.6")]),e._v(" "),n("p",[e._v("2，使用apache编译选项：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("./configure --prefix=/usr/local/php --with-mysql=/usr/local/mysql --with-openssl --with-mysqli=/usr/local/mysql/bin/mysql_config --enable-mbstring --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml  --enable-sockets --with-apxs2=/usr/local/apache/bin/apxs --with-mcrypt  --with-config-file-path=/etc --with-config-file-scan-dir=/etc/php.d --with-bz2  --enable-maintainer-zts\n\napache 如果使用prefork，不需要使用--enable-maintainer-zts；使用event和worker需要使用--enable-maintainer-zts\n\n编译示例：\n./configure --prefix=/usr/local/php_httpd_7.1 --with-pdo-mysql=mysqlnd --with-openssl --with-mysqli=mysqlnd --enable-mbstring --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=  --enable-xml  --enable-sockets --with-apxs2=/usr/local/apache/bin/apxs --with-mcrypt   --with-bz2  --enable-maintainer-zts\n")])])]),n("p",[e._v("使用nginx编译选项：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("./configure --prefix=/usr/local/php_nginx_7.1 --with-curl --with-bz2  --with-zlib --with-mhash --with-pcre-regex  --with-mysqli=mysqlnd --with-mysql=mysqlnd --with-gd --with-jpeg-dir --with-png-dir --with-openssl --with-pdo-mysql --with-libxml-dir --with-freetype-dir --with-iconv --enable-opcache --enable-bcmath --enable-ftp --enable-shmop --enable-fpm --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex  --enable-calendar --enable-zip --enable-mbstring --enable-pdo --with-gettext\n\n#php7.1中--with-mysql改为了  --with-pdo-mysql\n")])])]),n("p",[e._v("缺失的包：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("configure: error: xml2-config not found. Please check your libxml2 installation\n解决方法：     yum install -y  libxml2-devel\n\n\nconfigure: error: Cannot find OpenSSL's <evp.h>\n解决方法：     yum install -y openssl-devel\n\n\nconfigure: error: Please reinstall the BZip2 distribution\n解决方法：     yum install -y bzip2-devel\n\n\nconfigure: error: Please reinstall the libcurl distribution - easy.h should be in <curl-dir>/include/curl/\n解决方法：     yum install -y libcurl-devel\n\n\nconfigure: error: jpeglib.h not found\n解决方法：     yum install -y libjpeg-turbo-devel\n\n\nconfigure: error: png.h not found\n解决方法：     yum install -y libpng-devel\n\n\nconfigure: error: freetype-config not found\n解决方法：     yum install -y freetype-devel\n\n\n最后有提示：\nconfigure: WARNING: unrecognized options: --with-mysql\n\n\ncollect2: error: ld returned 1 exit status\n可能原因：使用编译过nginx版本的php文件夹，再次编译apache版本的php，./configure没有问题，在make && make install时出现这个错误\n解决方法：将php的源码包重新加压，在新解压的安装包中编译即可\n")])])]),n("p",[e._v("扩展编译：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("示例： 解决./configure 时提示“configure: error: mcrypt.h not found. Please reinstall libmcrypt.”\nwget ftp://mcrypt.hellug.gr/pub/crypto/mcrypt/attic/libmcrypt/libmcrypt-2.5.7.tar.gz\ntar -zxvf libmcrypt-2.5.7.tar.gz   \ncd libmcrypt-2.5.7  \n./configure --prefix=/usr/local/libmcrypt  \nmake && make install  \n\n再回到PHP-5.5.13解压缩的ext目录的mcrypt里面\nphpize  \n./configure --with-php-config=/usr/local/php5/bin/php-config  --with-libmcrypt=/usr/lib/libmcrypt      #在mcrypt的解压目录\n\nmake  \nmake test  \nmake install  \n  \nvim /etc/php.ini    \n#加入extension=mcrypt.so  \n")])])]),n("p",[e._v("附：114.55.61.117的php的编译参数：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Configure Command =>  './configure'  '--prefix=/usr/local/php56' '--with-config-file-path=/usr/local/php56/etc' '--with-config-file-scan-dir=/usr/local/php56/etc/php.d' '--with-fpm-user=www' '--with-fpm-group=www' '--enable-fpm' '--enable-opcache' '--disable-fileinfo' '--with-mysql=mysqlnd' '--with-mysqli=mysqlnd' '--with-pdo-mysql=mysqlnd' '--with-iconv-dir=/usr/local' '--with-freetype-dir' '--with-jpeg-dir' '--with-png-dir' '--with-zlib' '--with-libxml-dir=/usr' '--enable-xml' '--disable-rpath' '--enable-bcmath' '--enable-shmop' '--enable-exif' '--enable-sysvsem' '--with-curl' '--enable-mbregex' '--enable-inline-optimization' '--enable-mbstring' '--with-mcrypt' '--with-gd' '--enable-gd-native-ttf' '--with-openssl' '--with-mhash' '--enable-pcntl' '--enable-sockets' '--with-xmlrpc' '--enable-ftp' '--enable-intl' '--with-xsl' '--with-gettext' '--enable-zip' '--enable-soap' '--disable-ipv6' '--disable-debug'\n")])])])])}),[],!1,null,null,null);n.default=l.exports}}]);